{"remainingRequest":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-upload-image/dist/upload_image.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-upload-image/dist/upload_image.vue","mtime":1583532519390},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":1583532514267},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/thread-loader/dist/cjs.js","mtime":1583532518856},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/babel-loader/lib/index.js","mtime":1583532513681},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":1583532514267},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICd1cGxvYWQtaW1hZ2UnLAogICAgcHJvcHM6IHsKICAgICAgICBpbnB1dF9pZDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgZGVmYXVsdDogImRlZmF1bHQiCiAgICAgICAgfSwKICAgICAgICB1cmw6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgZGVmYXVsdDogbnVsbAogICAgICAgIH0sCiAgICAgICAgbmFtZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgZGVmYXVsdDogJ2ltYWdlc1tdJwogICAgICAgIH0sCiAgICAgICAgZGlzYWJsZV91cGxvYWQ6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgbWF4X2JhdGNoOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgICBkZWZhdWx0OiAwCiAgICAgICAgfSwKICAgICAgICBtYXhfZmlsZXM6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgIGRlZmF1bHQ6IDEwCiAgICAgICAgfSwKICAgICAgICBtYXhfZmlsZXNpemU6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgIGRlZmF1bHQ6IDgwMDAKICAgICAgICB9LAogICAgICAgIHJlc2l6ZV9lbmFibGVkOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHJlc2l6ZV9tYXhfd2lkdGg6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgIGRlZmF1bHQ6IDgwMAogICAgICAgIH0sCiAgICAgICAgcmVzaXplX21heF9oZWlnaHQ6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgIGRlZmF1bHQ6IDYwMAogICAgICAgIH0sCiAgICAgICAgYnV0dG9uX2h0bWw6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdVcGxvYWQgSW1hZ2VzJwogICAgICAgIH0sCiAgICAgICAgYnV0dG9uX2NsYXNzOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgICBkZWZhdWx0OiAnYnRuIGJ0bi1wcmltYXJ5JwogICAgICAgIH0KICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZm9ybTogbnVsbCwKICAgICAgICAgICAgaW5wdXQ6IG51bGwsCiAgICAgICAgICAgIGluZGV4OiAwLAogICAgICAgICAgICB0b3RhbDogMCwKICAgICAgICAgICAgZmlsZXM6IHt9LAogICAgICAgICAgICBpbWFnZToge30sCiAgICAgICAgICAgIGJhdGNoOiB7fSwKICAgICAgICAgICAgb25EcmFnb3ZlcjogZmFsc2UsCiAgICAgICAgICAgIG9uVXBsb2FkaW5nOiBmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5mb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZF9pbWFnZV9mb3JtLS0nICsgdGhpcy5pbnB1dF9pZCk7CiAgICAgICAgdGhpcy5pbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRfaW1hZ2VfZm9ybV9faW5wdXQtLScgKyB0aGlzLmlucHV0X2lkKTsKCiAgICAgICAgWydkcmFnJywgJ2RyYWdzdGFydCcsICdkcmFnZW5kJywKICAgICAgICAgICAgJ2RyYWdvdmVyJywgJ2RyYWdlbnRlcicsICdkcmFnbGVhdmUnLCAnZHJvcCddLmZvckVhY2goZXZlbnQgPT4gdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIChlKSA9PiB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9KSk7CgogICAgICAgIFsnZHJhZ292ZXInLCAnZHJhZ2VudGVyJ10KICAgICAgICAgICAgLmZvckVhY2goZXZlbnQgPT4gdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuZHJhZ0VudGVyKSk7CgogICAgICAgIFsnZHJhZ2xlYXZlJywgJ2RyYWdlbmQnLCAnZHJvcCddCiAgICAgICAgICAgIC5mb3JFYWNoKGV2ZW50ID0+IHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLmRyYWdMZWF2ZSkpOwoKICAgICAgICBbJ2Ryb3AnXQogICAgICAgICAgICAuZm9yRWFjaChldmVudCA9PiB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5maWxlRHJvcCkpOwoKICAgICAgICBbJ2NoYW5nZSddCiAgICAgICAgICAgIC5mb3JFYWNoKGV2ZW50ID0+IHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5maWxlRHJvcCkpOwoKICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogICAgICAgICAgICB0aGlzLmlucHV0LmNsaWNrKCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIF9jYW5feGhyKCkgewogICAgICAgICAgICBpZiAodGhpcy50b3RhbCA+PSB0aGlzLm1heF9maWxlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0sCiAgICAgICAgX2Nhbl91cGxvYWRfZmlsZShrZXkpIHsKICAgICAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmZpbGVzW2tleV07CgogICAgICAgICAgICBpZiAoZmlsZS5hdHRlbXB0ZWQgfHwgZmlsZS5iYWRfc2l6ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0sCiAgICAgICAgX3hocjogZnVuY3Rpb24gKGZvcm1EYXRhLCBrZXlzLCBjYWxsYmFjaykgewogICAgICAgICAgICB0aGlzLm9uVXBsb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgndXBsb2FkLWltYWdlLWF0dGVtcHQnLCBmb3JtRGF0YSk7CgogICAgICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZmlsZXNba2V5XSwgJ2F0dGVtcHRlZCcsIHRydWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCh0aGlzLnVybCwgZm9ybURhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZpbGVzW2tleV0sICd1cGxvYWRlZCcsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsKys7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGxvYWQtaW1hZ2Utc3VjY2VzcycsIFtmb3JtRGF0YSwgcmVzcG9uc2VdKTsKICAgICAgICAgICAgfSwgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGxvYWQtaW1hZ2UtZmFpbHVyZScsIFtmb3JtRGF0YSwgcmVzcG9uc2VdKTsKICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMub25VcGxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHVwbG9hZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuX2Nhbl94aHIoKSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuZmlsZXMpIHsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2FuX3VwbG9hZF9maWxlKGtleSkpIGNvbnRpbnVlOwoKICAgICAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKHRoaXMubmFtZSwgdGhpcy5maWxlc1trZXldLmZpbGUsIHRoaXMuZmlsZXNba2V5XS5uYW1lKTsKCiAgICAgICAgICAgICAgICB0aGlzLl94aHIoZm9ybURhdGEsIFtrZXldLCB0aGlzLnVwbG9hZCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVwbG9hZF9iYXRjaDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuX2Nhbl94aHIoKSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuYmF0Y2gpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3hocih0aGlzLmJhdGNoW2tleV0uZm9ybSwgdGhpcy5iYXRjaFtrZXldLmtleXMsIHRoaXMudXBsb2FkX2JhdGNoKTsKCiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5iYXRjaFtrZXldOwoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVfYmF0Y2g6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGV0IGluZGV4ID0gMDsKICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKCiAgICAgICAgICAgIHRoaXMuYmF0Y2ggPSB7fTsKCiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmZpbGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Nhbl91cGxvYWRfZmlsZShrZXkpKSBjb250aW51ZTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5iYXRjaFtpbmRleF0gPT0gbnVsbCB8fCBjb3VudCA9PSB0aGlzLm1heF9iYXRjaCkgewogICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmF0Y2hbaW5kZXhdID0ge2Zvcm06IG5ldyBGb3JtRGF0YSgpLCBrZXlzOiBbXX07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgIHRoaXMuYmF0Y2hbaW5kZXhdWydrZXlzJ10ucHVzaChrZXkpOwogICAgICAgICAgICAgICAgdGhpcy5iYXRjaFtpbmRleF1bJ2Zvcm0nXS5hcHBlbmQodGhpcy5uYW1lLCB0aGlzLmZpbGVzW2tleV0uZmlsZSwgdGhpcy5maWxlc1trZXldLm5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZC1pbWFnZS1zdWJtaXQnLCB0aGlzLmZpbGVzKTsKCiAgICAgICAgICAgIGlmKCF0aGlzLmRpc2FibGVfdXBsb2FkICYmICF0aGlzLm9uVXBsb2FkaW5nKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhfYmF0Y2ggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVfYmF0Y2goKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRfYmF0Y2goKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGRyYWdFbnRlcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB0aGlzLm9uRHJhZ292ZXIgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgZHJhZ0xlYXZlOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHRoaXMub25EcmFnb3ZlciA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgZmlsZURyb3A6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgIGxldCBuZXdGaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdGaWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZmlsZXMsIHRoaXMuaW5kZXgsIG5ld0ZpbGVzW2ldKTsKCiAgICAgICAgICAgICAgICBpZiAobmV3RmlsZXNbaV0udHlwZS5tYXRjaCgvaW1hZ2UuKi8pKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlSW5pdCh0aGlzLmluZGV4KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVSZWFkKHRoaXMuaW5kZXgpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPSAnJzsKICAgICAgICB9LAogICAgICAgIGZpbGVJbml0OiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIGxldCBmaWxlID0gdGhpcy5maWxlc1trZXldOwoKICAgICAgICAgICAgdGhpcy5maWxlc1trZXldID0gewogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5maWxlc1trZXldLm5hbWUsCiAgICAgICAgICAgICAgICBmaWxlOiB0aGlzLmZpbGVzW2tleV0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmICgoZmlsZS5zaXplICogMC4wMDEpID4gdGhpcy5tYXhfZmlsZXNpemUpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZpbGVzW2tleV0sICdiYWRfc2l6ZScsIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmaWxlUmVhZDogZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgKGUpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmltYWdlLCBrZXksIHJlYWRlci5yZXN1bHQpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZV9lbmFibGVkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlciA9IG5ldyBJbWFnZSgpOwoKICAgICAgICAgICAgICAgICAgICBpbWFnZXIub25sb2FkID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBpbWFnZXIud2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBpbWFnZXIuaGVpZ2h0OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gdGhpcy5yZXNpemVfbWF4X3dpZHRoIHx8IGhlaWdodCA+IHRoaXMucmVzaXplX21heF9oZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaGVpZ2h0IC8gd2lkdGgpIC0gKHRoaXMucmVzaXplX21heF9oZWlnaHQgLyB0aGlzLnJlc2l6ZV9tYXhfd2lkdGgpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5yZXNpemVfbWF4X2hlaWdodCAvIGhlaWdodCAqIHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRoaXMucmVzaXplX21heF9oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHRoaXMucmVzaXplX21heF93aWR0aCAvIHdpZHRoICogaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5yZXNpemVfbWF4X3dpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlciwgMCwgMCwgd2lkdGgsIGhlaWdodCk7CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SW1hZ2VEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIik7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5pbWFnZSwga2V5LCBuZXdJbWFnZURhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IGF0b2IobmV3SW1hZ2VEYXRhLnNwbGl0KCcsJylbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nX2J1ZmZlciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaW1nLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nX2J1ZmZlci5wdXNoKGltZy5jaGFyQ29kZUF0KGkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdThJbWFnZSA9IG5ldyBVaW50OEFycmF5KGltZ19idWZmZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZmlsZXMsIGtleSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5maWxlc1trZXldLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBuZXcgQmxvYihbdThJbWFnZV0sIHtmaWxlbmFtZTogdGhpcy5maWxlc1trZXldLm5hbWV9KQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZC1pbWFnZS1sb2FkZWQnLCB0aGlzLmZpbGVzW2tleV0pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaW1hZ2VyLnNyYyA9IHJlYWRlci5yZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1trZXldLmZpbGUpOwogICAgICAgIH0sCiAgICAgICAgZmlsZURlbGV0ZTogZnVuY3Rpb24gKGUsIGtleSkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCd1cGxvYWQtaW1hZ2UtcmVtb3ZlZCcsIHRoaXMuZmlsZXNba2V5XSk7CiAgICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLmZpbGVzLCBrZXkpOwogICAgICAgICAgICB0aGlzLiRkZWxldGUodGhpcy5pbWFnZSwga2V5KTsKICAgICAgICB9LAogICAgICAgIGZpbGVDbGljazogZnVuY3Rpb24gKGUsIGtleSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZC1pbWFnZS1jbGlja2VkJywgdGhpcy5maWxlc1trZXldKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["upload_image.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload_image.vue","sourceRoot":"node_modules/vue-upload-image/dist","sourcesContent":["<template>\n    <div class=\"vue_component__upload--image\" v-bind:class=\"{ 'dragover': onDragover }\">\n        <form v-bind:id=\"'upload_image_form--' + input_id\" enctype=\"multipart/form-data\">\n            <div class=\"upload_image_form__thumbnails\">\n                <div v-for=\"(value, key) in files\" class=\"upload_image_form__thumbnail\"\n                     v-on:click=\"fileClick($event, key)\"\n                     v-bind:class=\"{ 'uploaded': value.uploaded, 'bad-size': value.bad_size }\">\n                    <span v-on:click=\"fileDelete($event, key)\">\n                    &#x2716;\n                    </span>\n                    <img v-bind:src=\"image[key]\" v-bind:class=\"{ 'show': image[key]}\">\n                </div>\n            </div>\n            <input type=\"file\" v-bind:id=\"'upload_image_form__input--' + input_id\" hidden multiple/>\n            <div>\n                <button type=\"submit\"\n                        v-bind:class=\"button_class\"\n                        v-on:click=\"submit\"\n                        v-bind:disabled=\"onUploading\"\n                        v-html=\"button_html\"></button>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'upload-image',\n        props: {\n            input_id: {\n                type: String,\n                required: false,\n                default: \"default\"\n            },\n            url: {\n                type: String,\n                required: true,\n                default: null\n            },\n            name: {\n                type: String,\n                required: false,\n                default: 'images[]'\n            },\n            disable_upload: {\n                type: Boolean,\n                required: false,\n                default: false\n            },\n            max_batch: {\n                type: Number,\n                required: false,\n                default: 0\n            },\n            max_files: {\n                type: Number,\n                required: false,\n                default: 10\n            },\n            max_filesize: {\n                type: Number,\n                required: false,\n                default: 8000\n            },\n            resize_enabled: {\n                type: Boolean,\n                required: false,\n                default: false\n            },\n            resize_max_width: {\n                type: Number,\n                required: false,\n                default: 800\n            },\n            resize_max_height: {\n                type: Number,\n                required: false,\n                default: 600\n            },\n            button_html: {\n                type: String,\n                required: false,\n                default: 'Upload Images'\n            },\n            button_class: {\n                type: String,\n                required: false,\n                default: 'btn btn-primary'\n            }\n        },\n        data: function () {\n            return {\n                form: null,\n                input: null,\n                index: 0,\n                total: 0,\n                files: {},\n                image: {},\n                batch: {},\n                onDragover: false,\n                onUploading: false\n            }\n        },\n        mounted: function () {\n            this.form = document.getElementById('upload_image_form--' + this.input_id);\n            this.input = document.getElementById('upload_image_form__input--' + this.input_id);\n\n            ['drag', 'dragstart', 'dragend',\n                'dragover', 'dragenter', 'dragleave', 'drop'].forEach(event => this.form.addEventListener(event, (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n            }));\n\n            ['dragover', 'dragenter']\n                .forEach(event => this.form.addEventListener(event, this.dragEnter));\n\n            ['dragleave', 'dragend', 'drop']\n                .forEach(event => this.form.addEventListener(event, this.dragLeave));\n\n            ['drop']\n                .forEach(event => this.form.addEventListener(event, this.fileDrop));\n\n            ['change']\n                .forEach(event => this.input.addEventListener(event, this.fileDrop));\n\n            this.form.addEventListener('click', (e) => {\n                this.input.click();\n            });\n        },\n        methods: {\n            _can_xhr() {\n                if (this.total >= this.max_files) {\n                    return false;\n                }\n                return true;\n            },\n            _can_upload_file(key) {\n                let file = this.files[key];\n\n                if (file.attempted || file.bad_size) {\n                    return false;\n                }\n                return true;\n            },\n            _xhr: function (formData, keys, callback) {\n                this.onUploading = true;\n                this.$emit('upload-image-attempt', formData);\n\n                keys.forEach((key) => {\n                    this.$set(this.files[key], 'attempted', true);\n                });\n\n                this.$http.post(this.url, formData).then((response) => {\n                    keys.forEach((key) => {\n                        this.$set(this.files[key], 'uploaded', true);\n\n                        this.total++;\n                    });\n\n                    this.$emit('upload-image-success', [formData, response]);\n                }, (response) => {\n                    this.$emit('upload-image-failure', [formData, response]);\n                }).then((response) => {\n                    this.onUploading = false;\n\n                    callback();\n                });\n            },\n            upload: function () {\n                if (!this._can_xhr()) return false;\n\n                for (let key in this.files) {\n                    if (!this._can_upload_file(key)) continue;\n\n                    let formData = new FormData();\n                    formData.append(this.name, this.files[key].file, this.files[key].name);\n\n                    this._xhr(formData, [key], this.upload);\n\n                    return true;\n                }\n            },\n            upload_batch: function () {\n                if (!this._can_xhr()) return false;\n\n                for (let key in this.batch) {\n                    this._xhr(this.batch[key].form, this.batch[key].keys, this.upload_batch);\n\n                    delete this.batch[key];\n\n                    return true;\n                }\n            },\n            create_batch: function () {\n                let index = 0;\n                let count = 0;\n\n                this.batch = {};\n\n                for (let key in this.files) {\n                    if (!this._can_upload_file(key)) continue;\n\n                    if (this.batch[index] == null || count == this.max_batch) {\n                        index++;\n                        count = 0;\n                        this.batch[index] = {form: new FormData(), keys: []};\n                    }\n\n                    count++;\n                    this.batch[index]['keys'].push(key);\n                    this.batch[index]['form'].append(this.name, this.files[key].file, this.files[key].name);\n                }\n            },\n            submit: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                this.$emit('upload-image-submit', this.files);\n\n                if(!this.disable_upload && !this.onUploading) {\n                    if (this.max_batch > 1) {\n                        this.create_batch();\n                        return this.upload_batch();\n                    }\n                    this.upload();\n                }\n            },\n            dragEnter: function (e) {\n                e.preventDefault();\n                this.onDragover = true;\n            },\n            dragLeave: function (e) {\n                e.preventDefault();\n                this.onDragover = false;\n            },\n            fileDrop: function (e) {\n                e.preventDefault();\n\n                let newFiles = e.target.files || e.dataTransfer.files;\n\n                for (let i = 0; i < newFiles.length; i++) {\n                    this.$set(this.files, this.index, newFiles[i]);\n\n                    if (newFiles[i].type.match(/image.*/)) {\n                        this.fileInit(this.index);\n                        this.fileRead(this.index);\n\n                        this.index++;\n                    }\n                    ;\n                }\n                e.target.value = '';\n            },\n            fileInit: function (key) {\n                let file = this.files[key];\n\n                this.files[key] = {\n                    name: this.files[key].name,\n                    file: this.files[key]\n                };\n\n                if ((file.size * 0.001) > this.max_filesize) {\n                    this.$set(this.files[key], 'bad_size', true);\n                }\n            },\n            fileRead: function (key) {\n                let reader = new FileReader();\n\n                reader.addEventListener(\"load\", (e) => {\n                    this.$set(this.image, key, reader.result);\n\n                    if (this.resize_enabled) {\n                        let imager = new Image();\n\n                        imager.onload = () => {\n                            let width = imager.width;\n                            let height = imager.height;\n\n                            if (width > this.resize_max_width || height > this.resize_max_height) {\n                                if ((height / width) - (this.resize_max_height / this.resize_max_width) > 0) {\n                                    width = this.resize_max_height / height * width;\n                                    height = this.resize_max_height;\n                                } else {\n                                    height = this.resize_max_width / width * height;\n                                    width = this.resize_max_width;\n                                }\n                            }\n\n                            let canvas = document.createElement(\"canvas\");\n                            canvas.width = width;\n                            canvas.height = height;\n\n                            let ctx = canvas.getContext(\"2d\");\n                            ctx.drawImage(imager, 0, 0, width, height);\n\n                            let newImageData = canvas.toDataURL(\"image/png\");\n\n                            this.$set(this.image, key, newImageData);\n\n                            //\n                            let img = atob(newImageData.split(',')[1]);\n                            let img_buffer = [];\n                            let i = 0;\n                            while (i < img.length) {\n                                img_buffer.push(img.charCodeAt(i));\n                                i++;\n                            }\n                            let u8Image = new Uint8Array(img_buffer);\n\n                            this.$set(this.files, key, {\n                                name: this.files[key].name,\n                                file: new Blob([u8Image], {filename: this.files[key].name})\n                            });\n\n                            this.$emit('upload-image-loaded', this.files[key]);\n                        };\n                        imager.src = reader.result;\n                    }\n                });\n\n                reader.readAsDataURL(this.files[key].file);\n            },\n            fileDelete: function (e, key) {\n                this.$emit('upload-image-removed', this.files[key]);\n                this.$delete(this.files, key);\n                this.$delete(this.image, key);\n            },\n            fileClick: function (e, key) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.$emit('upload-image-clicked', this.files[key]);\n            }\n        }\n    }\n</script>\n\n<style lang=\"css\" scoped>\n    .vue_component__upload--image {\n        padding: 5px;\n        cursor: pointer;\n        min-height: 80px;\n        border-radius: 5px;\n    }\n\n    .vue_component__upload--image.dragover {\n    }\n\n    .vue_component__upload--image form > div {\n        text-align: center;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnails {\n        margin-bottom: 1em;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail {\n        border-radius: 2.5px;\n        position: relative;\n        width: 20%;\n        padding: 20% 0 0;\n        overflow: hidden;\n        margin: 10px;\n        display: inline-block;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail img {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        min-width: 100%;\n        min-height: 100%;\n        max-height: 150%;\n        opacity: 0;\n        transform: translateX(-50%) translateY(-50%);\n        transition: 1s opacity;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail img.show {\n        opacity: 1;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail img:hover {\n        filter: blur(2px);\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail.bad-size img {\n        filter: grayscale(100%);\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail.uploaded img {\n        opacity: 0.1;\n    }\n\n    .vue_component__upload--image .upload_image_form__thumbnail span {\n        position: absolute;\n        top: -5px;\n        left: 0px;\n        z-index: 100;\n        padding: 0px 1px;\n        border-radius: 2px;\n        background-color: grey;\n    }\n</style>\n"]}]}