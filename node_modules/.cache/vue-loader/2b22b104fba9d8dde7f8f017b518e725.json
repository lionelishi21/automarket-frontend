{"remainingRequest":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lionelfrancis/development/frontend/carmarket/src/views/Sign/user.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lionelfrancis/development/frontend/carmarket/src/views/Sign/user.vue","mtime":1588245777310},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":1583532514267},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/babel-loader/lib/index.js","mtime":1583532513681},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":1583532514267},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFBsdWdpbnMgfSBmcm9tICJAY2FwYWNpdG9yL2NvcmUiOwpjb25zdCB7IFB1c2hOb3RpZmljYXRpb25zIH0gPSBQbHVnaW5zOwogCi8vCi8vIHdpdGggdHlwZSBzdXBwb3J0CmltcG9ydCB7IEZDTSB9IGZyb20gImNhcGFjaXRvci1mY20iOwpjb25zdCBmY20gPSBuZXcgRkNNKCk7CiAKLy8KLy8gYWx0ZXJuYXRpdmVseSAtIHdpdGhvdXQgdHlwZXMKY29uc3QgeyBGQ01QbHVnaW4gfSA9IFBsdWdpbnM7CiAKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAJcmV0dXJuIHsKICAgIAkJdXNlcjogewogICAgCQkJZW1haWw6ICcnLAogICAgCQkJcGFzc3dvcmQ6ICcnLAogICAgICAgICAgZmNtVG9rZW46ICcnLAogICAgCQl9LAogICAgICAgIHN1Y2Nlc3NNc2c6IGZhbHNlLAogICAgICAgIHZhbGlkYXRpb25FcnI6ICcnLAogICAgICAgIGlzX3ZhbGlkOiAnJywKICAgICAgICBlcnJvcjogewogICAgICAgICAgbWVzc2FnZTogJycKICAgICAgICB9CiAgICAJfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuc3VjY2Vzc01zZyA9IGZhbHNlCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS51c2VyICE9IHVuZGVmaW5lZCApIHsKICAgICAgICAgdGhpcy5zdWNjZXNzTXNnID0gdHJ1ZQogICAgICB9CgogICAgICAvLyB0aGlzLmdldFVzZXJUb2tlbigpCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgLy8gaW5pdGlhbGl6YXRpb24gb2YgZm9ybSB2YWxpZGF0aW9uCiAgICAgICQuSFNDb3JlLmNvbXBvbmVudHMuSFNWYWxpZGF0aW9uLmluaXQoJy5qcy12YWxpZGF0ZScpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgbG9naW4oIHVzZXIpIHsKCiAgICAgICAgdGhpcy5pc192YWxpZCA9ICcnCiAgICAgICAgdGhpcy5lcnJvci5tZXNzYWdlID0gJycKCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJywgdXNlcikKICAgICAgICAgIC50aGVuKCByZXNwb25zZSA9PiB7CiAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0dGluZyB1c2VyLi4nKQogICAgICAgICAgICAgCiAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0Q3VycmVudFVzZXInKQogICAgICAgICAgICAgICAudGhlbiggcmVzcCA9PiB7CiAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICAgICAgICAgICB9KS5jYXRjaCggZXJyID0+IHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGVyci5yZXNwb25zZSkKICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCBlcnJvciA9PiB7CiAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgIHRoaXMuaXNfdmFsaWQgPSAnaXMtaW52YWxpZCcKICAgICAgICAgICAgIHRoaXMuZXJyb3IubWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGdldFVzZXJUb2tlbigpIHsKICAgICAgICAgUHVzaE5vdGlmaWNhdGlvbnMucmVnaXN0ZXIoKQogICAgICAgICAgLnRoZW4oKCkgPT4gewoKICAgICAgICAgICAgZmNtCiAgICAgICAgICAgICAgIC5nZXRUb2tlbigpCiAgICAgICAgICAgICAgIC50aGVuKHIgPT4gewogICAgICAgICAgICAgICAgICBhbGVydChgVG9rZW4gJHtyLnRva2VufWApCiAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5mY21Ub2tlbiA9IHIudG9rZW4KICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgLmNhdGNoKCBlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgICAgIH0pCiAgICAgIH0sCgogICAgfQp9Cg=="},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"user.vue","sourceRoot":"src/views/Sign","sourcesContent":["<template>\n\n  <!-- ========== MAIN ========== -->\n    <!-- Login Form -->\n    <div class=\"container space-2\">\n      <form class=\"js-validate w-md-75 w-lg-50 mx-md-auto\" @submit.prevent=\"login(user)\">\n        <!-- Title -->\n        <div class=\"mb-7\">\n          <h2 class=\"h3 text-primary font-weight-normal mb-0\">Welcome <span class=\"font-weight-semi-bold\">back</span></h2>\n          <p>Login to manage your account.</p>\n        </div>\n        <!-- End Title -->\n\n        <div class=\"alert alert-success\" role=\"alert\" v-show=\"successMsg\">\n          <h4 class=\"alert-heading\">Well done!</h4>\n          <p class=\"alert-text\">Thank you for registering.</p>\n          <p class=\"alert-text mb-0\">Check your email for verification code.</p>\n        </div>\n        <!-- Form Group -->\n         <div class=\"js-form-message form-group\">\n          <input \n                 type=\"email\" \n                 :class=\"is_valid\"\n                 class=\"form-control\"\n                 v-model=\"user.email\" name=\"email\" id=\"signinSrEmailExample1\" placeholder=\"Email address\" aria-label=\"Email address\" \n                 data-msg=\"Please enter a valid email address.\"\n                 data-error-class=\"u-has-error\"\n                 data-success-class=\"u-has-success\" required>\n              \n                 <div class=\"invalid-feedback\">\n                    {{error.message['error']}}\n                    <a href=\"#\"> resend verification code</a>\n                 </div>\n        </div>\n        <!-- End Form Group -->\n\n        <!-- Form Group -->\n        <div class=\"js-form-message form-group\">\n          <label class=\"form-label\" for=\"signinSrPassword\">\n            <span class=\"d-flex justify-content-between align-items-center\">\n              Password\n              <a class=\"link-muted text-capitalize font-weight-normal\" href=\"recover-account-simple.html\">Forgot Password?</a>\n            </span>\n          </label>\n          <input type=\"password\" :class=\"is_valid\" class=\"form-control\" name=\"password\" id=\"signinSrPassword\" placeholder=\"********\" aria-label=\"********\" \n                 data-msg=\"Your password is invalid. Please try again.\"\n                 data-error-class=\"u-has-error\"\n                 v-model=\"user.password\"\n                 data-success-class=\"u-has-success\" required>\n        </div>\n        <!-- End Form Group -->\n\n        <!-- Button -->\n        <div class=\"row align-items-center mb-5\">\n          <div class=\"col-6\">\n            <span class=\"small text-muted\">Don't have an account?</span>\n               <router-link to=\"/user-onboarding\" tag=\"a\">signup</router-link>\n          </div>\n\n          <div class=\"col-6 text-right\">\n            <button type=\"submit\" class=\"btn btn-primary transition-3d-hover\">Login</button>\n          </div>\n        </div>\n        <!-- End Button -->\n      </form>\n    </div>\n    <!-- End Login Form -->\n</template>\n<script>\nimport { Plugins } from \"@capacitor/core\";\nconst { PushNotifications } = Plugins;\n \n//\n// with type support\nimport { FCM } from \"capacitor-fcm\";\nconst fcm = new FCM();\n \n//\n// alternatively - without types\nconst { FCMPlugin } = Plugins;\n \n\nexport default {\n    data() {\n    \treturn {\n    \t\tuser: {\n    \t\t\temail: '',\n    \t\t\tpassword: '',\n          fcmToken: '',\n    \t\t},\n        successMsg: false,\n        validationErr: '',\n        is_valid: '',\n        error: {\n          message: ''\n        }\n    \t}\n    },\n    created() {\n      this.successMsg = false\n      if (this.$route.query.user != undefined ) {\n         this.successMsg = true\n      }\n\n      // this.getUserToken()\n    },\n    mounted() {\n      // initialization of form validation\n      $.HSCore.components.HSValidation.init('.js-validate');\n    },\n    methods: {\n      login( user) {\n\n        this.is_valid = ''\n        this.error.message = ''\n\n        this.$store.dispatch('login', user)\n          .then( response => {\n           \n            console.log(response)\n            console.log('getting user..')\n             \n             this.$store.dispatch('getCurrentUser')\n               .then( resp => {\n                 this.$router.push('/')\n               }).catch( err => {\n                  console.log( err.response)\n               })\n               \n          })\n          .catch( error => {\n             console.log(error.response)\n             let errorMessage = error.response.data.message\n             this.is_valid = 'is-invalid'\n             this.error.message = error.response.data\n          })\n      },\n      getUserToken() {\n         PushNotifications.register()\n          .then(() => {\n\n            fcm\n               .getToken()\n               .then(r => {\n                  alert(`Token ${r.token}`)\n                  this.user.fcmToken = r.token\n               })\n               .catch( err => console.log(err));\n         })\n      },\n\n    }\n}\n</script>"]}]}