{"remainingRequest":"/home/lionel/dev/carmarket/node_modules/babel-loader/lib/index.js!/home/lionel/dev/carmarket/src/store/modules/user.js","dependencies":[{"path":"/home/lionel/dev/carmarket/src/store/modules/user.js","mtime":1582602948060},{"path":"/home/lionel/dev/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lionel/dev/carmarket/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGkgZnJvbSAnLi4vLi4vYXBpL3NlcnZpY2UuanMnOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW5zOiB7CiAgICBhY2Nlc3NfdG9rZW46IG51bGwsCiAgICBleHBpcmVzX2luOiBudWxsLAogICAgcmVmcmVzaF90b2tlbjogbnVsbCwKICAgIHRva2VuX3R5cGU6IG51bGwKICB9LAogIHByb2ZpbGU6IHt9LAogIGN1cnJlbnRVc2VyOiBudWxsCn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjb250ZXh0LCB1c2VyKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAvLyBjbGllbnRfaWQ6IDIsCiAgICAgICAgLy8gY2xpZW50X3NlY3JldDogJ2RPandLdVJROURaQlNmcVZnYUlPdjVqSVdhZ3pRM2lOSmo3M2xUQ3onLAogICAgICAgIC8vIGdyYW50X3R5cGU6ICdwYXNzd29yZCcsCiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvbG9naW4nLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpOwogICAgICAgIHJlc3BvbnNlRGF0YS5leHBpcmVzX2luID0gcmVzcG9uc2VEYXRhLmV4cGlyZXNfaW4gKyBub3c7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VEYXRhKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlVG9rZW5zJywgcmVzcG9uc2VEYXRhLnRva2VuKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzX3Rva2VuJywgcmVzcG9uc2VEYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgZ2V0Q3VycmVudFVzZXI6IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKGNvbnRleHQpIHsKICAgIGNvbnNvbGUubG9nKCdnZXR0aW5nIGN1cnJlbnQgdXNlci4uLicpOwogICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHRva2VuOwogICAgY29uc29sZS5sb2coJ2FjY2Vzc19pdGVtJyArIHRva2VuKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS91c2VyJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlQ3VycmVudFVzZXInLCByZXNwb25zZURhdGEpOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgQVVUSF9SRUdJU1RFUjogZnVuY3Rpb24gQVVUSF9SRUdJU1RFUihjb250ZXh0LCB1c2VyKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJpbmcgdXNlci4uLicpOwogICAgICBheGlvcy5wb3N0KCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL3JlZ2lzdGVyJywgdXNlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICByZXNwb25zZURhdGEuZXhwaXJlc19pbiA9IHJlc3BvbnNlRGF0YS5leHBpcmVzX2luICsgbm93OwogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlRGF0YSk7CiAgICAgICAgY29udGV4dC5jb21taXQoJ3VwZGF0ZVRva2VucycsIHJlc3BvbnNlRGF0YS50b2tlbik7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZWplY3QoZXJyKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIEFVVEhfTE9HT1VUOiBmdW5jdGlvbiBBVVRIX0xPR09VVChfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBjb25zb2xlLmxvZygnbG9nZ2luZyB1c2VyIG91dC4uLicpOwogICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgY29uc29sZS5sb2coJ2FjY2Vzc190b2tlbicgKyB0b2tlbik7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgdG9rZW47CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBheGlvcy5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvbG9nb3V0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICAgICAgY29uc29sZS5sb2coJ2xvZ291dCB1c2VyLi4uJyk7CiAgICAgICAgdmFyIHVzZXIgPSB7fTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlQ3VycmVudFVzZXInLCB1c2VyKTsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2ZhaWwgdG8gbG9nb3V0IHVzZXIuLi4nKTsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIEdFVF9VU0VSX1BST0ZJTEU6IGZ1bmN0aW9uIEdFVF9VU0VSX1BST0ZJTEUoX3JlZjIsIHBheWxvYWQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICBjb25zb2xlLmxvZygnYWNjZXNzX3Rva2VuJyArIHRva2VuKTsKICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB0b2tlbjsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGNvbnNvbGUubG9nKCdnZWV0aW5nIHVzZXIgcHJvZmlsZS4uLicpOwogICAgICBheGlvcy5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvcHJvZmlsZScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfUFJPRklMRScsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgdXBkYXRlVG9rZW5zOiBmdW5jdGlvbiB1cGRhdGVUb2tlbnMoc3RhdGUsIHRva2VucykgewogICAgc3RhdGUudG9rZW5zID0gdG9rZW5zOwogIH0sCiAgdXBkYXRlQ3VycmVudFVzZXI6IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRVc2VyKHN0YXRlLCBjdXJyZW50VXNlcikgewogICAgc3RhdGUuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjsKICB9LAogIFNFVF9VU0VSX1BST0ZJTEU6IGZ1bmN0aW9uIFNFVF9VU0VSX1BST0ZJTEUoc3RhdGUsIHByb2ZpbGUpIHsKICAgIHN0YXRlLnByb2ZpbGUgPSBwcm9maWxlOwogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgZ2V0QWNjZXNzVG9rZW46IGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudG9rZW5zLmFjY2Vzc190b2tlbjsKICB9LAogIEdldFVzZXJQcm9maWxlOiBmdW5jdGlvbiBHZXRVc2VyUHJvZmlsZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb2ZpbGU7CiAgfSwKICBnZXRDdXJyZW50VXNlcjogZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jdXJyZW50VXNlcjsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["/home/lionel/dev/carmarket/src/store/modules/user.js"],"names":["axios","api","state","tokens","access_token","expires_in","refresh_token","token_type","profile","currentUser","actions","login","context","user","Promise","resolve","reject","data","email","password","console","log","post","then","response","responseData","now","Date","commit","token","localStorage","setItem","catch","err","getCurrentUser","getItem","defaults","headers","common","get","message","AUTH_REGISTER","AUTH_LOGOUT","removeItem","error","GET_USER_PROFILE","payload","mutations","updateTokens","updateCurrentUser","SET_USER_PROFILE","getters","getAccessToken","GetUserProfile"],"mappings":"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","sourcesContent":["\nimport axios from \"axios\";\nimport api from '../../api/service.js'\n\nconst state = {\n  tokens: {\n    access_token: null,\n    expires_in: null,\n    refresh_token: null,\n    token_type: null\n  },\n  profile: {},\n  currentUser: null\n}\n\nconst actions = {\n  login( context, user) {\n     return new Promise((resolve, reject) => {\n\n        let data = {\n          // client_id: 2,\n          // client_secret: 'dOjwKuRQ9DZBSfqVgaIOv5jIWagzQ3iNJj73lTCz',\n          // grant_type: 'password',\n          email: user.email,\n          password: user.password,\n        };\n\n         console.log(data)\n         axios.post('http://127.0.0.1:8000/api/login', data)\n          .then(response => {\n            let responseData = response.data\n            let now = Date.now()\n\n            responseData.expires_in = responseData.expires_in + now\n\n            console.log(responseData)\n\n            context.commit('updateTokens', responseData.token)\n            localStorage.setItem('access_token', responseData.token )\n\n            resolve(response)\n          }).catch( err => { reject(err)})\n     })\n  },\n  getCurrentUser(context) {\n    \n     console.log('getting current user...')\n     let token = localStorage.getItem('access_token')\n\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    \n    console.log('access_item'+ token)\n    return new Promise((resolve, reject) => {\n      axios.get('http://127.0.0.1:8000/api/user')\n        .then (response => {\n          let responseData = response.data\n          context.commit('updateCurrentUser', responseData)\n          resolve(response)\n        }).catch( err => { \n          console.log(err.message)\n          reject(err)\n        })\n    })\n  },\n  AUTH_REGISTER(context, user) {\n\n    return new Promise((resolve, reject) => {\n       console.log('registering user...')\n       axios.post('http://127.0.0.1:8000/api/register', user)\n      .then(response => {\n          let responseData = response.data\n          let now = Date.now()\n\n          responseData.expires_in = responseData.expires_in + now\n\n          console.log(responseData)\n          context.commit('updateTokens', responseData.token)\n\n          resolve(response)\n        }).catch( err => { reject(err)})\n     })\n  },\n  AUTH_LOGOUT({commit}){\n    console.log('logging user out...')\n     let token = localStorage.getItem('access_token')\n     console.log('access_token'+ token)\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n\n    return new Promise(( resolve, reject) => {\n        axios.get('http://127.0.0.1:8000/api/logout')\n          .then( response => {\n            localStorage.removeItem('access_token')\n            console.log('logout user...')\n             let user = {}\n             context.commit('updateCurrentUser', user)\n            resolve(response)\n          }).catch( error => {\n            console.log('fail to logout user...')\n            console.log(error)\n            reject(error)\n          })\n    });\n  },\n  GET_USER_PROFILE({commit}, payload) {\n\n     let token = localStorage.getItem('access_token')\n     console.log('access_token'+ token)\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    return new Promise((resolve, reject) => {\n      console.log('geeting user profile...')\n      axios.get('http://127.0.0.1:8000/api/profile')\n        .then( response => {\n           console.log(response)\n           commit('SET_USER_PROFILE', response.data)\n           resolve(response)\n        }).catch( error => {\n          console.log(error.response)\n          reject(error)\n        })\n    })\n  }\n}\n\n\nconst mutations = {\n    updateTokens(state, tokens) {\n      state.tokens = tokens\n    },\n    updateCurrentUser(state, currentUser) {\n      state.currentUser = currentUser\n    },\n    SET_USER_PROFILE(state, profile) {\n      state.profile = profile\n    }\n}\n\nconst getters = {\n    getAccessToken(state) {\n      return state.tokens.access_token\n    },\n    GetUserProfile(state) {\n      return state.profile\n    },\n    getCurrentUser(state) {\n      return state.currentUser\n    },\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}"]}]}