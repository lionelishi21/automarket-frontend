{"remainingRequest":"/home/lionel/Projects/vue_app/surkeys_website/node_modules/babel-loader/lib/index.js!/home/lionel/Projects/vue_app/surkeys_website/src/store/modules/user.js","dependencies":[{"path":"/home/lionel/Projects/vue_app/surkeys_website/src/store/modules/user.js","mtime":1578886154627},{"path":"/home/lionel/Projects/vue_app/surkeys_website/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lionel/Projects/vue_app/surkeys_website/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGFwaSBmcm9tICIuLi8uLi9hcGkvc2VydmljZS5qcyI7CnZhciBzdGF0ZSA9IHsKICB0b2tlbnM6IHsKICAgIGFjY2Vzc190b2tlbjogbnVsbCwKICAgIGV4cGlyZXNfaW46IG51bGwsCiAgICByZWZyZXNoX3Rva2VuOiBudWxsLAogICAgdG9rZW5fdHlwZTogbnVsbAogIH0sCiAgcHJvZmlsZToge30sCiAgY3VycmVudFVzZXI6IG51bGwKfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIHVzZXIpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIC8vIGNsaWVudF9pZDogMiwKICAgICAgICAvLyBjbGllbnRfc2VjcmV0OiAnZE9qd0t1UlE5RFpCU2ZxVmdhSU92NWpJV2FnelEzaU5KajczbFRDeicsCiAgICAgICAgLy8gZ3JhbnRfdHlwZTogJ3Bhc3N3b3JkJywKICAgICAgICBlbWFpbDogdXNlci5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICB9OwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgYXhpb3MucG9zdCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9sb2dpbicsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgICAgICAgcmVzcG9uc2VEYXRhLmV4cGlyZXNfaW4gPSByZXNwb25zZURhdGEuZXhwaXJlc19pbiArIG5vdzsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZURhdGEpOwogICAgICAgIGNvbnRleHQuY29tbWl0KCd1cGRhdGVUb2tlbnMnLCByZXNwb25zZURhdGEudG9rZW4pOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCByZXNwb25zZURhdGEudG9rZW4pOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBnZXRDdXJyZW50VXNlcjogZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoY29udGV4dCkgewogICAgY29uc29sZS5sb2coJ2dldHRpbmcgY3VycmVudCB1c2VyLi4uJyk7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgdG9rZW47CiAgICBjb25zb2xlLmxvZygnYWNjZXNzX2l0ZW0nICsgdG9rZW4pOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL3VzZXInKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnRleHQuY29tbWl0KCd1cGRhdGVDdXJyZW50VXNlcicsIHJlc3BvbnNlRGF0YSk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBBVVRIX1JFR0lTVEVSOiBmdW5jdGlvbiBBVVRIX1JFR0lTVEVSKGNvbnRleHQsIHVzZXIpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlcmluZyB1c2VyLi4uJyk7CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvcmVnaXN0ZXInLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpOwogICAgICAgIHJlc3BvbnNlRGF0YS5leHBpcmVzX2luID0gcmVzcG9uc2VEYXRhLmV4cGlyZXNfaW4gKyBub3c7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VEYXRhKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlVG9rZW5zJywgcmVzcG9uc2VEYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgQVVUSF9MT0dPVVQ6IGZ1bmN0aW9uIEFVVEhfTE9HT1VUKF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGNvbnNvbGUubG9nKCdsb2dnaW5nIHVzZXIgb3V0Li4uJyk7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7CiAgICBjb25zb2xlLmxvZygnYWNjZXNzX3Rva2VuJyArIHRva2VuKTsKICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB0b2tlbjsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICBjb25zb2xlLmxvZygnbG9nb3V0IHVzZXIuLi4nKTsKICAgICAgICB2YXIgdXNlciA9IHt9OwogICAgICAgIGNvbnRleHQuY29tbWl0KCd1cGRhdGVDdXJyZW50VXNlcicsIHVzZXIpOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmFpbCB0byBsb2dvdXQgdXNlci4uLicpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgR0VUX1VTRVJfUFJPRklMRTogZnVuY3Rpb24gR0VUX1VTRVJfUFJPRklMRShfcmVmMiwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgIGNvbnNvbGUubG9nKCdhY2Nlc3NfdG9rZW4nICsgdG9rZW4pOwogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHRva2VuOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgY29uc29sZS5sb2coJ2dlZXRpbmcgdXNlciBwcm9maWxlLi4uJyk7CiAgICAgIGF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9wcm9maWxlJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUl9QUk9GSUxFJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICB1cGRhdGVUb2tlbnM6IGZ1bmN0aW9uIHVwZGF0ZVRva2VucyhzdGF0ZSwgdG9rZW5zKSB7CiAgICBzdGF0ZS50b2tlbnMgPSB0b2tlbnM7CiAgfSwKICB1cGRhdGVDdXJyZW50VXNlcjogZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoc3RhdGUsIGN1cnJlbnRVc2VyKSB7CiAgICBzdGF0ZS5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyOwogIH0sCiAgU0VUX1VTRVJfUFJPRklMRTogZnVuY3Rpb24gU0VUX1VTRVJfUFJPRklMRShzdGF0ZSwgcHJvZmlsZSkgewogICAgc3RhdGUucHJvZmlsZSA9IHByb2ZpbGU7CiAgfQp9Owp2YXIgZ2V0dGVycyA9IHsKICBnZXRBY2Nlc3NUb2tlbjogZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS50b2tlbnMuYWNjZXNzX3Rva2VuOwogIH0sCiAgR2V0VXNlclByb2ZpbGU6IGZ1bmN0aW9uIEdldFVzZXJQcm9maWxlKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZmlsZTsKICB9LAogIGdldEN1cnJlbnRVc2VyOiBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmN1cnJlbnRVc2VyOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/home/lionel/Projects/vue_app/surkeys_website/src/store/modules/user.js"],"names":["axios","api","state","tokens","access_token","expires_in","refresh_token","token_type","profile","currentUser","actions","login","context","user","Promise","resolve","reject","data","email","password","console","log","post","then","response","responseData","now","Date","commit","token","localStorage","setItem","catch","err","getCurrentUser","getItem","defaults","headers","common","get","message","AUTH_REGISTER","AUTH_LOGOUT","removeItem","error","GET_USER_PROFILE","payload","mutations","updateTokens","updateCurrentUser","SET_USER_PROFILE","getters","getAccessToken","GetUserProfile"],"mappings":"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","sourcesContent":["\nimport axios from \"axios\";\nimport api from '../../api/service.js'\n\nconst state = {\n  tokens: {\n    access_token: null,\n    expires_in: null,\n    refresh_token: null,\n    token_type: null\n  },\n  profile: {},\n  currentUser: null\n}\n\nconst actions = {\n  login( context, user) {\n     return new Promise((resolve, reject) => {\n\n        let data = {\n          // client_id: 2,\n          // client_secret: 'dOjwKuRQ9DZBSfqVgaIOv5jIWagzQ3iNJj73lTCz',\n          // grant_type: 'password',\n          email: user.email,\n          password: user.password,\n        };\n\n         console.log(data)\n         axios.post('http://127.0.0.1:8000/api/login', data)\n          .then(response => {\n            let responseData = response.data\n            let now = Date.now()\n\n            responseData.expires_in = responseData.expires_in + now\n\n            console.log(responseData)\n\n            context.commit('updateTokens', responseData.token)\n            localStorage.setItem('access_token', responseData.token )\n\n            resolve(response)\n          }).catch( err => { reject(err)})\n     })\n  },\n  getCurrentUser(context) {\n    \n     console.log('getting current user...')\n     let token = localStorage.getItem('access_token')\n\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    \n    console.log('access_item'+ token)\n    return new Promise((resolve, reject) => {\n      axios.get('http://127.0.0.1:8000/api/user')\n        .then (response => {\n          let responseData = response.data\n          context.commit('updateCurrentUser', responseData)\n          resolve(response)\n        }).catch( err => { \n          console.log(err.message)\n          reject(err)\n        })\n    })\n  },\n  AUTH_REGISTER(context, user) {\n\n    return new Promise((resolve, reject) => {\n       console.log('registering user...')\n       axios.post('http://127.0.0.1:8000/api/register', user)\n      .then(response => {\n          let responseData = response.data\n          let now = Date.now()\n\n          responseData.expires_in = responseData.expires_in + now\n\n          console.log(responseData)\n          context.commit('updateTokens', responseData.token)\n\n          resolve(response)\n        }).catch( err => { reject(err)})\n     })\n  },\n  AUTH_LOGOUT({commit}){\n    console.log('logging user out...')\n     let token = localStorage.getItem('access_token')\n     console.log('access_token'+ token)\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n\n    return new Promise(( resolve, reject) => {\n        axios.get('http://127.0.0.1:8000/api/logout')\n          .then( response => {\n            localStorage.removeItem('access_token')\n            console.log('logout user...')\n             let user = {}\n             context.commit('updateCurrentUser', user)\n            resolve(response)\n          }).catch( error => {\n            console.log('fail to logout user...')\n            console.log(error)\n            reject(error)\n          })\n    });\n  },\n  GET_USER_PROFILE({commit}, payload) {\n\n     let token = localStorage.getItem('access_token')\n     console.log('access_token'+ token)\n     axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    return new Promise((resolve, reject) => {\n      console.log('geeting user profile...')\n      axios.get('http://127.0.0.1:8000/api/profile')\n        .then( response => {\n           console.log(response)\n           commit('SET_USER_PROFILE', response.data)\n           resolve(response)\n        }).catch( error => {\n          console.log(error.response)\n          reject(error)\n        })\n    })\n  }\n}\n\n\nconst mutations = {\n    updateTokens(state, tokens) {\n      state.tokens = tokens\n    },\n    updateCurrentUser(state, currentUser) {\n      state.currentUser = currentUser\n    },\n    SET_USER_PROFILE(state, profile) {\n      state.profile = profile\n    }\n}\n\nconst getters = {\n    getAccessToken(state) {\n      return state.tokens.access_token\n    },\n    GetUserProfile(state) {\n      return state.profile\n    },\n    getCurrentUser(state) {\n      return state.currentUser\n    },\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}"]}]}