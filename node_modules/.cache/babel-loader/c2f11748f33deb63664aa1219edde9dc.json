{"remainingRequest":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/babel-loader/lib/index.js!/Users/lionelfrancis/development/frontend/carmarket/src/utils/auth.js","dependencies":[{"path":"/Users/lionelfrancis/development/frontend/carmarket/src/utils/auth.js","mtime":1588303673077},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/cache-loader/dist/cjs.js","mtime":1583532514267},{"path":"/Users/lionelfrancis/development/frontend/carmarket/node_modules/babel-loader/lib/index.js","mtime":1583532513681}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwp2YXIgQVVUSF9UT0tFTl9LRVkgPSAnYWNjZXNzX3Rva2VuJzsKZXhwb3J0IGZ1bmN0aW9uIGxvZ291dFVzZXIoKSB7CiAgY2xlYXJBdXRoVG9rZW4oKTsKfQpleHBvcnQgZnVuY3Rpb24gc2V0QXV0aFRva2VuKHRva2VuKSB7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFVVEhfVE9LRU5fS0VZLCB0b2tlbik7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhUb2tlbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQVVUSF9UT0tFTl9LRVkpOwp9CmV4cG9ydCBmdW5jdGlvbiBjbGVhckF1dGhUb2tlbigpIHsKICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJyc7CiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oQVVUSF9UT0tFTl9LRVkpOwp9CmV4cG9ydCBmdW5jdGlvbiBpc0xvZ2dlZEluKCkgewogIHZhciBhdXRoVG9rZW4gPSBnZXRBdXRoVG9rZW4oKTsKICByZXR1cm4gISFhdXRoVG9rZW47IC8vIHJldHVybiAhIWF1dGhUb2tlbiAmJiAhaXNUb2tlbkV4cGlyZWQoYXV0aFRva2VuKQp9CmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHsKICBpZiAoaXNMb2dnZWRJbigpKSB7CiAgICByZXR1cm4gZ2V0QXV0aFRva2VuKCk7CiAgfQp9CgpmdW5jdGlvbiBnZXRUb2tlbkV4cGlyYXRpb25EYXRlKGVuY29kZWRUb2tlbikgewogIHZhciB0b2tlbiA9IGVuY29kZWRUb2tlbjsKCiAgaWYgKCF0b2tlbi5leHApIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICBkYXRlLnNldFVUQ1NlY29uZHModG9rZW4uZXhwKTsKICByZXR1cm4gZGF0ZTsKfQoKZnVuY3Rpb24gaXNUb2tlbkV4cGlyZWQodG9rZW4pIHsKICB2YXIgZXhwaXJhdGlvbkRhdGUgPSBnZXRUb2tlbkV4cGlyYXRpb25EYXRlKHRva2VuKTsKICByZXR1cm4gZXhwaXJhdGlvbkRhdGUgPCBuZXcgRGF0ZSgpOwp9"},{"version":3,"sources":["/Users/lionelfrancis/development/frontend/carmarket/src/utils/auth.js"],"names":["axios","AUTH_TOKEN_KEY","logoutUser","clearAuthToken","setAuthToken","token","defaults","headers","common","localStorage","setItem","getAuthToken","getItem","removeItem","isLoggedIn","authToken","getUserInfo","getTokenExpirationDate","encodedToken","exp","date","Date","setUTCSeconds","isTokenExpired","expirationDate"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,IAAMC,cAAc,GAAG,cAAvB;AAEA,OAAO,SAASC,UAAT,GAAsB;AACzBC,EAAAA,cAAc;AACjB;AAED,OAAO,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAChCL,EAAAA,KAAK,CAACM,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,qBAA2DH,KAA3D;AACAI,EAAAA,YAAY,CAACC,OAAb,CAAqBT,cAArB,EAAqCI,KAArC;AACH;AAED,OAAO,SAASM,YAAT,GAAwB;AAC3B,SAAOF,YAAY,CAACG,OAAb,CAAqBX,cAArB,CAAP;AACH;AAED,OAAO,SAASE,cAAT,GAA0B;AAC7BH,EAAAA,KAAK,CAACM,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,EAAjD;AACAC,EAAAA,YAAY,CAACI,UAAb,CAAwBZ,cAAxB;AACH;AAED,OAAO,SAASa,UAAT,GAAsB;AACzB,MAAIC,SAAS,GAAGJ,YAAY,EAA5B;AACA,SAAO,CAAC,CAACI,SAAT,CAFyB,CAGzB;AACH;AAED,OAAO,SAASC,WAAT,GAAuB;AAC1B,MAAIF,UAAU,EAAd,EAAkB;AACd,WAAOH,YAAY,EAAnB;AACH;AACJ;;AAED,SAASM,sBAAT,CAAgCC,YAAhC,EAA8C;AAC1C,MAAIb,KAAK,GAAGa,YAAZ;;AACA,MAAI,CAACb,KAAK,CAACc,GAAX,EAAgB;AACZ,WAAO,IAAP;AACH;;AAED,MAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAAT,CAAX;AACAD,EAAAA,IAAI,CAACE,aAAL,CAAmBjB,KAAK,CAACc,GAAzB;AAEA,SAAOC,IAAP;AACH;;AAED,SAASG,cAAT,CAAwBlB,KAAxB,EAA+B;AAC3B,MAAImB,cAAc,GAAGP,sBAAsB,CAACZ,KAAD,CAA3C;AACA,SAAOmB,cAAc,GAAG,IAAIH,IAAJ,EAAxB;AACH","sourcesContent":["import axios from 'axios'\n\n\nconst AUTH_TOKEN_KEY = 'access_token'\n\nexport function logoutUser() {\n    clearAuthToken()\n}\n\nexport function setAuthToken(token) {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n    localStorage.setItem(AUTH_TOKEN_KEY, token)\n}\n\nexport function getAuthToken() {\n    return localStorage.getItem(AUTH_TOKEN_KEY)    \n}\n\nexport function clearAuthToken() {\n    axios.defaults.headers.common['Authorization'] = ''\n    localStorage.removeItem(AUTH_TOKEN_KEY)\n}\n\nexport function isLoggedIn() {\n    let authToken = getAuthToken()\n    return !!authToken\n    // return !!authToken && !isTokenExpired(authToken)\n}\n\nexport function getUserInfo() {\n    if (isLoggedIn()) {\n        return getAuthToken()\n    }\n}\n\nfunction getTokenExpirationDate(encodedToken) {\n    let token = encodedToken\n    if (!token.exp) {\n        return null\n    }\n  \n    let date = new Date(0)\n    date.setUTCSeconds(token.exp)\n  \n    return date\n}\n  \nfunction isTokenExpired(token) {\n    let expirationDate = getTokenExpirationDate(token)\n    return expirationDate < new Date()\n}"]}]}